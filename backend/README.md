# ä½“è‚²æ´»åŠ¨å¹³å°åç«¯ API

è¿™æ˜¯ä¸€ä¸ªåŸºäº FastAPI å¼€å‘çš„ä½“è‚²æ´»åŠ¨å¹³å°åç«¯æœåŠ¡ï¼Œæä¾›å®Œæ•´çš„ RESTful API æ¥å£ã€‚

## åŠŸèƒ½ç‰¹æ€§

- âœ… ç”¨æˆ·æ³¨å†Œä¸ç™»å½•ï¼ˆJWT è®¤è¯ï¼‰
- âœ… æ´»åŠ¨ç®¡ç†ï¼ˆåˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ã€æŸ¥çœ‹ï¼‰
- âœ… æ´»åŠ¨æœç´¢ä¸åˆ†é¡µ
- âœ… æ´»åŠ¨æŠ¥åä¸è®¢å•ç®¡ç†
- âœ… æ´»åŠ¨è¯„è®ºç³»ç»Ÿ
- âœ… ç”¨æˆ·æƒé™æ§åˆ¶

## æŠ€æœ¯æ ˆ

- **Web æ¡†æ¶**: FastAPI
- **æ•°æ®åº“**: SQLAlchemy + SQLite/PostgreSQL
- **è®¤è¯**: JWT (JSON Web Tokens)
- **å¯†ç åŠ å¯†**: bcrypt
- **æ•°æ®éªŒè¯**: Pydantic

## API æ¥å£æ–‡æ¡£

### ğŸ” è®¤è¯æ¥å£

| æ–¹æ³• | è·¯å¾„             | æè¿°             | è®¤è¯è¦æ±‚ |
| ---- | ---------------- | ---------------- | -------- |
| POST | `/auth/register` | ç”¨æˆ·æ³¨å†Œ         | âŒ        |
| POST | `/auth/login`    | ç”¨æˆ·ç™»å½•         | âŒ        |
| GET  | `/auth/me`       | è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ | âœ…        |

### ğŸ“… æ´»åŠ¨æ¥å£

| æ–¹æ³•   | è·¯å¾„                          | æè¿°                         | è®¤è¯è¦æ±‚     |
| ------ | ----------------------------- | ---------------------------- | ------------ |
| POST   | `/events/`                    | åˆ›å»ºæ´»åŠ¨                     | âœ…            |
| GET    | `/events/`                    | è·å–æ´»åŠ¨åˆ—è¡¨ï¼ˆæ”¯æŒæœç´¢åˆ†é¡µï¼‰ | âŒ            |
| GET    | `/events/my`                  | è·å–æˆ‘åˆ›å»ºçš„æ´»åŠ¨             | âœ…            |
| GET    | `/events/{event_id}`          | è·å–æ´»åŠ¨è¯¦æƒ…                 | âŒ            |
| PUT    | `/events/{event_id}`          | æ›´æ–°æ´»åŠ¨                     | âœ… (ä»…åˆ›å»ºè€…) |
| DELETE | `/events/{event_id}`          | åˆ é™¤æ´»åŠ¨                     | âœ… (ä»…åˆ›å»ºè€…) |
| POST   | `/events/{event_id}/register` | æŠ¥åæ´»åŠ¨                     | âœ…            |

### ğŸ“‹ è®¢å•æ¥å£

| æ–¹æ³•   | è·¯å¾„                 | æè¿°             | è®¤è¯è¦æ±‚         |
| ------ | -------------------- | ---------------- | ---------------- |
| GET    | `/orders/`           | è·å–æˆ‘çš„è®¢å•åˆ—è¡¨ | âœ…                |
| GET    | `/orders/{order_id}` | è·å–è®¢å•è¯¦æƒ…     | âœ… (ä»…è®¢å•æ‰€æœ‰è€…) |
| DELETE | `/orders/{order_id}` | å–æ¶ˆè®¢å•         | âœ… (ä»…è®¢å•æ‰€æœ‰è€…) |

### ğŸ’¬ è¯„è®ºæ¥å£

| æ–¹æ³•   | è·¯å¾„                          | æè¿°         | è®¤è¯è¦æ±‚       |
| ------ | ----------------------------- | ------------ | -------------- |
| POST   | `/comments/`                  | åˆ›å»ºè¯„è®º     | âœ…              |
| GET    | `/comments/events/{event_id}` | è·å–æ´»åŠ¨è¯„è®º | âŒ              |
| DELETE | `/comments/{comment_id}`      | åˆ é™¤è¯„è®º     | âœ… (ä»…è¯„è®ºä½œè€…) |

## æ•°æ®æ¨¡å‹

### ç”¨æˆ· (User)
- id: ç”¨æˆ·ID
- username: ç”¨æˆ·å
- email: é‚®ç®±
- full_name: å…¨å
- phone: ç”µè¯
- is_active: æ˜¯å¦æ¿€æ´»
- created_at: åˆ›å»ºæ—¶é—´

### æ´»åŠ¨ (Event)
- id: æ´»åŠ¨ID
- title: æ´»åŠ¨æ ‡é¢˜
- description: æ´»åŠ¨æè¿°
- location: æ´»åŠ¨åœ°ç‚¹
- event_time: æ´»åŠ¨æ—¶é—´
- capacity: æ´»åŠ¨å®¹é‡
- price: æ´»åŠ¨ä»·æ ¼ï¼ˆåˆ†ï¼‰
- status: æ´»åŠ¨çŠ¶æ€ï¼ˆactive/cancelled/completedï¼‰
- creator_id: åˆ›å»ºè€…ID

### è®¢å• (Order)
- id: è®¢å•ID
- user_id: ç”¨æˆ·ID
- event_id: æ´»åŠ¨ID
- status: è®¢å•çŠ¶æ€ï¼ˆactive/cancelledï¼‰
- created_at: åˆ›å»ºæ—¶é—´

### è¯„è®º (Comment)
- id: è¯„è®ºID
- content: è¯„è®ºå†…å®¹
- user_id: ç”¨æˆ·ID
- event_id: æ´»åŠ¨ID
- created_at: åˆ›å»ºæ—¶é—´

## å¿«é€Ÿå¼€å§‹

1. å®‰è£…ä¾èµ–ï¼š
```bash
pip install -r requirements.txt
```

2. è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆå¤åˆ¶ .env.example ä¸º .env å¹¶ä¿®æ”¹é…ç½®ï¼‰

3. å¯åŠ¨æœåŠ¡ï¼š
```bash
python run.py
```

4. è®¿é—® API æ–‡æ¡£ï¼š
- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

## æœç´¢åŠŸèƒ½

æ´»åŠ¨åˆ—è¡¨æ¥å£æ”¯æŒä»¥ä¸‹æœç´¢å‚æ•°ï¼š
- `search`: å…³é”®è¯æœç´¢ï¼ˆæ ‡é¢˜å’Œæè¿°ï¼‰
- `date_from`: å¼€å§‹æ—¥æœŸè¿‡æ»¤
- `date_to`: ç»“æŸæ—¥æœŸè¿‡æ»¤
- `location`: åœ°ç‚¹è¿‡æ»¤
- `status`: çŠ¶æ€è¿‡æ»¤
- `page`: é¡µç 
- `limit`: æ¯é¡µæ•°é‡

ç¤ºä¾‹ï¼š
```
GET /events/?search=ç¯®çƒ&location=åŒ—äº¬&page=1&limit=10
```

## æƒé™è®¾è®¡

- å…¬å¼€æ¥å£ï¼šæ´»åŠ¨åˆ—è¡¨ã€æ´»åŠ¨è¯¦æƒ…ã€æ´»åŠ¨è¯„è®ºæŸ¥çœ‹
- éœ€è¦ç™»å½•ï¼šæ´»åŠ¨åˆ›å»ºã€æŠ¥åã€è¯„è®ºã€è®¢å•ç®¡ç†
- èµ„æºæ‰€æœ‰è€…æƒé™ï¼šåªæœ‰åˆ›å»ºè€…å¯ä»¥ç¼–è¾‘/åˆ é™¤è‡ªå·±çš„æ´»åŠ¨å’Œè¯„è®º
